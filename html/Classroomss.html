<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>课堂</title>
  <!-- import CSS -->
   <script src="../js/vue.js"></script>    
 
 <!--解决ui组件不适配问题-->
 <meta  charset="utf-8" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
 <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0" />
<!--移动适配-->  
 <script type="text/javascript" src="../js/yidong.js"></script>
 <link rel="stylesheet" type="text/css" href="../css/yidong.css"/>
  
 <link rel="stylesheet" href="../node_modules/_muse-ui@3.0.1@muse-ui/dist/muse-ui.css">
 <script src="../node_modules/_muse-ui@3.0.1@muse-ui/dist/muse-ui.js"></script>
  
 <script src="../node_modules/_vant@1.3.5@vant/lib/vant.js"></script>
 <link rel="stylesheet" href="../node_modules/_vant@1.3.5@vant/lib/vant-css/index.css">
 	<!--<link rel="stylesheet" href="https://unpkg.com/vant/lib/vant-css/index.css">
  <script src="https://unpkg.com/vant/lib/vant.min.js"></script>-->
  
  <style type="text/css">
  	body,ul,ol,li,p,h1,h2,h3,h4,h5,h6,form,fieldset,table,td,img,div{margin:0;padding:0;border:0;} body{background:#fff;color:#333;font-size:12px; }  ul,ol{list-style-type:none;} select,input,img,select{}  a{text-decoration:none;} a:link{color:#009;} a:visited{color:#800080;} a:hover,a:active,a:focus{color:#c00;text-decoration:underline;}
  	div{box-sizing: border-box;}
  	*{
  		 font-family: 'FangSong_GB2312';
  	}	
  	.btn_box{
  		width: 100%;
  		height: 1.306666rem;
  		text-align: center;
  		border-top: 0.006666rem solid rgba(222,222,222,1);
  		position:fixed ;
  		bottom: 0;
  		left: 0;
  		/*background: red;*/
  		background: white;
  	}
  	.btn_box div{
  		/*width: 0.6rem;*/
  		height: 100%;
  		float: left;
  		/*background: deepskyblue;*/
  		text-align: center;
  	}
  	.btn_box img{
  		width: 0.52rem;
  		height:0.426666rem;
  		margin-top: 0.2rem;
  		/*margin-bottom: 0.106666rem;*/
  	}
  	.btn_box p{
  		font-size: 0.30333rem;
  		color: #BE1B1B;
  	}
  	
  	/*----------------------------------------------------------------------------------------------------------*/
  	
  	#wu{
  		width:5.04rem;
  		height: 5.333333rem;
  		margin: 3.6rem auto;
  		text-align: center;
  	}
  	.tops{
  		width: 100%;
  		height: 0.973333rem;
  		background: #F5F5F5;
  		/*text-align: center;*/
  		font-size: 0.373333rem;
  		line-height: 0.973333rem;
  		/*position: relative;*/
  		/*margin-bottom: 0.813333rem;*/
  		position: fixed;
  		top: 0;
  		left: 0;
  		z-index: 2;
  	}
  	.tops p{
  		float: left;
  	}
  	.tops img{
  		width: 0.266666rem;
  		height: 0.146666rem;
  	  float: left;
  	  margin: 0.413333rem 0 0 0.133333rem;
  	}
  	.xue{
  		width: 1.6rem;
  		height: 2.266666rem;
  		float: left;
  		text-align: center;
  		margin-bottom:0.56rem;
  		margin-left:0.733333rem;
  	}
  	.xue img{
  		width: 1.6rem;
  		height: 1.6rem;
  	}
  	.xue p{
  		font-size: 0.36rem;
  		color: #999999;
  		margin-top: 0.213333rem;
  	}
  	.kao{
  		width: 2rem;
  		height: 2rem;
  		position: fixed;
  		    bottom: 1.713333rem;
    right: 0.44rem;
  	}
  	#ale{
  		
  	}
  	.imgbox{
  		width: 2.3rem;
  		height: 2.506666rem;
  		/*float: left;*/
  		margin-top: 0.746666rem;
  		text-align: center;
  		margin: auto;
  	}
  	.imgbox img{
  		 width: 1.72rem;
  		 height: 1.706666rem;
  	}
  	.imgbox p{
  		font-size: 0.426666rem;
  		color: #999999;
  		margin-top: 0.4rem;
  	}
  	#dle2{
  			width: 100%;
  		background:rgba(0,0,0,0.7);
  		position: fixed;
  		top: 0;
  		left: 0;
  		z-index: 2;
  	}
  	.tops img{
  		/*float: float;*/
  	}
  	.date_tab{
  		width: 3.885714rem;
  		height: 1.085714rem;
  		border-radius: 0.142857rem;
  		font-size: 0.457142rem;
  		color: white;
  		line-height:1.085714rem;
  		text-align: center;
  		margin: 0;
  	}
  	#date_tab_box_c div{
  		 float: left;
  		 background: #61BAFC;
  		 margin-top:0.657142rem;
  	}
  	.fade-enter-active, .fade-leave-active {
      transition: opacity 0.3s
    }
  .fade-enter, .fade-leave-to /* .fade-leave-active, 2.1.8 版本以下 */ {
      opacity: 0
    }
  
 /***********************************************************************/ 
  #mengs{
  	background:rgba(255,255,255,0.95);
  	 /*height: 6.666666rem;*/
  	 width: 100%;
  	 height: 100%;
  	 position: fixed;
  	 top: 0;
  	 left: 0;
  	 z-index: 500;
  	 /*transition: 0.3s;*/
  }
  #ales{
  	 width: 6.333333rem;
  	 height: 6.333333rem;
  	 margin: 4.333333rem auto;
  	 position: relative;
  }
  #mengs div img{
  	width: 100%;
  	height: 100%;
  }
   #mengs div p{
   	  font-size:0.4rem;
   	  color: #61BAFC;
   	  font-family:'Microsoft JhengHei';
   	  font-weight: 600;
   }
   #p_bs{
   	  width: 100%;
   	  height: 0.4rem;
   	  line-height: 0.4rem;
   	  text-align: center;
   	  position: absolute;
   	  left: 0;
   	  /*bottom: 0;*/
   	  
   }
   
   .btnss{
   	   width:4rem;
   	   height:1.333333rem;
   	   line-height:1.333333rem;
   	   margin:1.333333rem auto;
   	   text-align: center;
   	   font-size: 0.4rem;
   	   border-radius: 0.666666rem;
   	   background: red;
   	   font-weight: 600;
   	   color: white;
   }
   .ales{
   	  /*width: 100%;*/
   	  height: 100%;
   }
   #btna{
   	width:2.666666rem;height:0.866666rem;margin:0.66666rem auto auto;background: rgb(97, 186, 252);font-size: 0.4rem;color:white;
   	line-height: 0.866666rem;
   	border-radius: 0.133333rem;
   }
   .toubiao{
    	width: 100%;
    	height: 0.571428rem;
    	background: #F5F5F5;
    	line-height: 0.571428rem;
    	padding-left: 0.453333rem;
    	box-sizing: border-box;
    	font-size: 0.4rem;
    }
    .boxs{
    	width:100%;
    	height: 1.813333rem;
    	background: white;
    	border-bottom: 0.013333rem solid #DEDEDE;
    	line-height: 1.813333rem;
    	padding-left: 0.2rem;
    	position: relative;
    	/*padding-right: 0.7rem;*/
    }
    .img_box{
     	width: 1.28rem;
     	height: 1.28rem;
     	float: left;
     	margin: 0.266666rem  0 0;
     	/*background: yellowgreen;*/
     	border-radius: 50%;
     }
     .img_box img{
    	 width: 100%;
    	 height: 100%;
    }
    .name{
     	font-size: 0.373333rem;
     	float: left;
     	margin: 0;
     	width: 1.571428rem;
     	height: 100%;
     	overflow: hidden;
     	margin-left: 0.333333rem;
     	/*margin-right: 282px;*/
     	/*text-align: center;*/
     }
     .shou{
  			width:5.973333rem;
  			height:0.906666rem;
  			/*border-top: 1px solid #DEDEDE;*/
  			text-align: center;
  			background: white;
  			margin: 0;
  			position: relative;
  			float: left;
  		}
  	.shou input{
  		width:100%;
  		height:100%;
  		background: #F8F8F8;
  		border: none;
  		border-radius: 0.453333rem;
  		text-align: center;
  		/*margin-top: 0.133333rem;*/
  		
  	  }
  	   #inpp{
  		 font-size: 0.426666rem;
  		 color: #DEDEDE;
  		 position: absolute;
  		 left:1.96rem;
  		 top:0.16rem;
  	}
  	#inpimg{
  		 	width: 0.4rem;
  		 	height: 0.4rem;
  		 position: absolute;
  		 left:1.4rem;
  		 top: 0.266666rem;
  	}
  	#uls{
  		 width: 0.8rem;
  		 color: #BE1B1B;
  		 position: fixed;
  		 top: 2.385714rem;
  		 right: 0;
  		 z-index: 2;
  		 text-align: center;
  	}
  	#uls li{
  		height: 0.521428rem;
  		width: 0.371428rem;
  		line-height: 0.471428rem;
  		text-align: center;
  		position: relative;
  		text-align: center;
  		margin: auto;
  	}
  	.p_bs{
    	 height: 0.521428rem;
  		width: 0.371428rem;
    	 background:#61BAFC;
    	
    	 z-index: 2;
    	 /*border-radius: 50%;*/
    	 
    	 line-height: 0.328571rem;
    	  /*border-radius: 50%;*/
    	 position: absolute;
    	 top: 0;
    	 
    	 transition: 0.3s;
    	 
    }
    .pass{
    	 width: 100%;
    	 height: 100%;
    	 position: absolute;
    	 top: 0;
    	 left: 0;
    	 z-index: 5;
    	 /*color: white;*/
    	transition: 0.2s;
    }
    .psa{
    	 color: white;
    	 
    }
    #kong_act{
    	width:3.666666rem;height:1.066666rem;line-height:0.666666rem;font-size:0.35rem;text-align:center;
    	margin:5.333333rem auto;
    }
    #xia_dom{
    	 width: 2.56rem;
    	 height: 100%;
    	 /*background: red;*/
    	 float: right;
    	 margin-left: 0.306666rem;
    	 padding-left: 0.266666rem;
    	 padding-right: 0.4rem;
    	 font-size: 0.373333rem;
    	 position: relative;
    	
    }
    #xia_dom p{
    	 float: left;
    	 line-height: 0.91rem;
    }
    #xia_dom img{
    	 float: right;
    	 width: 0.253333rem;
    	 height: 0.146666rem;
    	 margin-top: 0.406666rem;
    	 transition: 0.5s;
    }
    .xian_y{
    	 height: 0.533333rem;
    	 float: left;
    	 border-left: 0.013333rem solid #DEDEDE;
    	 margin-top: 0.2rem;
    }
    #xia_doms{
    	  width: 2.026666rem;
    	  height: 100%;
    	  float: right;
    	  color: #61BAFC;
    	  font-size:0.373333rem;
    }
    #xia_doms p{
    	 float: left;
    	 line-height: 0.91rem;
    }
    #xia_doms img{
    	 float: right;
    	 width: 0.4rem;
    	 height: 0.4rem;
    	 margin-top:0.263333rem;
    }
    .aders{
    	 width:100%;
    	 height:0;
    	 position:absolute;
    	 top: 1rem;
    	 left: 0;
    	 transition: 0.5s;
    	 font-size: 0.32rem;
    	 color: #999999;
    	 background: white;
    	 border-radius:0.066666rem;
    	 z-index: 200;
    	 overflow: hidden;
    }
    .aders_s{
    	 width: 100%;
    	 height:4.03133rem;
    	 background: white;
    	 box-shadow:0px 5px 10px rgba(0,0,0,0.16);
    }
    .ader_c{
    	 width: 100%;
    	 height: 0.813333rem;
    	 border-top: 0.013333rem solid #DEDEDE;
    	 line-height: 0.813rem;
    	 padding-left: 0.266666rem;
    }
    .img_xuan{
    	  transform: rotate(180deg)
    }
    .img_xuans{
    	  transform: rotate(0deg)
    }
    .ader_c_s{
    	 color: #BE1B1B;
    }
    
    .type_tie{
    	  /*width: 1.2rem;*/
    	 padding: 0 0.4rem;
    	  height: 0.746666rem;
    	  float: left;
    	  /*margin-left: 0.266666rem;*/
    	  margin-top: 0.533333rem;
    	  /*background: red;*/
    	  text-align: center;
    	  line-height:0.746666rem;
    	  font-size: 0.32rem;
    	  color: white;
    	  border-radius: 0.066666rem;
    	  margin-right: 0.1rem;
    }
    #adid{
    	 width: 82%;
    	 height: 11.966666rem;
    	 margin: 2.333333rem auto;
    	 border-radius:0.066666rem;
    	 /*overflow:hidden;*/
    }
    .usebtn{
    	  height: 0.933333rem;
    	  line-height: 0.933333rem;
    	  text-align: center;
    	  float: right;
    	  margin-top: 0.433333rem;
    	  /*margin-left: 0.4rem;*/
    }
    .ader_top{
    	  width: 100%;height:1.173333rem;background: white;box-sizing: border-box;padding: 0.113333rem 0.38rem;
    	  position: fixed;
    	  top:0.973333rem;
    	  left:0;
    	  z-index:2;
    	  border-bottom: 0.013333rem solid #DEDEDE;
    	  border-top: 0.013333rem solid #DEDEDE;
    }
    .demo-date-picker .mu-picker{
    	  width: 100%;
    }
    *{
    	 font-family:'Microsoft JhengHei';
    }
    .del_tab{
    	  width: 100%;
    	  height: 100%;
    }
    #bianji{
    	 float: left;
    	 width:40%;
    	 background:#999999;
    }
    #dells{
    	  width: 60%;
    	  float: left;
    	  background: #f44;
    	  text-align: center;
    }
    .meng_box p{
		 font-size: 0.426666rem;
		 color: #6E4C45;
		 margin-bottom: 0.366666rem;
	}
	.meng_box{
		 width: 8.4rem;
		 height: 5rem;
		 background: white;
		 margin:5rem auto;
		 border-radius: 0.133333rem;
	}
	.meng{
		width: 100%;
		height: 100%;
		position: fixed;
		top: 0;
		left: 0;
		z-index:200;
		background: rgba(0,0,0,.6);
	}
	.meng_box_c{
		 width: 80%;
		 padding-top: 0.583333rem;
		 height: 100%;
		 margin: 0 auto;
	}
	.inps_ss{
		 width: 100%;
		 height:1.013333rem;
		 background: #F0F0F0;
		 border-radius: 0.133333rem;
		 margin-bottom: 0.5rem;
		 font-size: 0.373333rem;
		 padding-left: 0.266666rem;
		 border: none;
	}
	.btn_sj{
		 width: 100%;
		 height: 1.173333rem;
		 background: #EAEAEA;
		 border-radius: 0.586666rem;
		 border: none;
		 font-size: 0.48rem;
		 color: #6E4C45;
	}
	.dal_a{
		 width:1.333333rem;
		 height: 1.333333rem;
		 position: fixed;
		 right: 0.333333rem;
		 bottom: 2.626666rem;
		 background:#61BAFC;
		 box-shadow:0px 4px 8px rgba(97,186,252,0.42);
		 border-radius: 50%;
		 font-size: 0.366666rem;
		 color: white;
		 line-height: 1.333333rem;
		 text-align:center;
	}
  </style>
</head>
<body style="height:100%;">
	 
	 <!--body设置高度为100%div设置高度为100%时高度就是视口的高度-->
	 <div id='mengs'>
	 	 <div id="ales">
	 		 <img src="../img/gif/0147d85b320ba0a80120b959abcc40.gif"/>
	 		    <div id="p_bs"><p>加载中...</p></div>
	 	   </div>
	 </div>
	 
	<!--
		js:
		
		$('#mengs').fadeOut(300);
	  
	-->
	<!---->
	
  <div id="app" @click="ader_show=false" style="width: 100%;float: left;padding-top: 1.173rem;">
  	 <!--
       	作者：2443611475@qq.com
       	时间：2018-10-10
       	描述：没有学生显示的
       -->
     <div v-show="top_show" id="wu">
     	<img style="width: 2.8rem;height:2.8rem;" src="../img/weitianjiatouxiang@2x.png"/>
     	<p style="font-size: 0.426666rem;font-weight: 600;margin-top: 0.8rem;">还没有学生！</p>
     	<p style="font-size: 0.373333rem;color: #999999;margin-top: 0.266666rem;">添加学生后才可以进行管理哦~</p>
     </div>
   <!--
       	作者：2443611475@qq.com
       	时间：2018-10-10
       	描述：有学生
       -->
   <div v-show="top_show==false">
   	   <div @click="show2=!show2" class="tops">
   	    	<div id="tt" style="width:100%;height: 100%;margin: auto;text-align: center;">
   	    			{{ding_vuale}}&nbsp;▼
   	    	</div>
   	   </div>
   	   <div style="width: 100%;height:0.96rem;"></div>
<!--学生列表------------------------------------------------------------------------------------------------------>   	 
       <div class="ader_top" style="">
       	 <div class="shou">
  	  		 <p id="inpp" v-show="inps" @click.stop="jiaos">搜索学生姓名</p>
  	  	   <img id="inpimg"  v-show="inps"  @click.stop="jiaos" src="../img/sousuo@3x.png" alt="" />
  	  		 <input v-model="inpv" id="inp" @blur.prevent="changeCount_s()" @focus="inps=false" @input="changeCount()" type="text" @keyup="alertA($event)"  />
  	  	</div>
<!--下拉选项--------------------------------------------------------------------------------------------------------> 	
  	  	<div @click.stop @click="ader_show=!ader_show" id="xia_dom">
  	  		  <p>{{ader_title}}</p>
  	  		  <img :class="{img_xuan:ader_show,img_xuans:ader_show==false}" src="../img/shouqi@2x.png" alt="" />
  	  		  
  	  		  <div @click.stop class="aders" :class="{aders_s:ader_show}">
  	  		  	    <div v-show="ader_show" class="ader_c" :class="{ader_c_s:ader_index==index}" v-for="(i,index) in ader_act" @click="ader_c_click(i,index)">
  	  		  	    	   {{i}}
  	  		  	    </div>
  	  		  </div>
  	  	</div>
       </div>
     <ul id="uls" v-show="Student_list.length>3">
     	   <div style="width: 0.3714rem;height:100%;margin: 0 auto;position:relative;">
     	   	  <div v-show="Student_list.length!=0" style="" class="p_bs" ></div>
     	   </div>
  	   	  
  	   	  <li v-for='(i,index) in Student_list' v-show="i.StudentList.length!=0" @click='cehua(index,i.initials)' class="li_ac" >
  	   	  	 <p  class="pass" :class="{psa:li_ac==index}">{{i.initials?i.initials:'*'}}</p>
  	   	  </li>
  	   </ul>

   	 <div style="width: 100%;padding-bottom: 1.266666rem;float: left;">
   	 	
<!--筛选没有学生-->   	   
   	   <div v-if="kong_act_x" id="kong_act" @click="all_act" style=""><a href="#">没有查询到学生哦，点击展示所有学生！</a></div>
   	   
<!--筛选有学生-->
      <div v-else v-for='(h,c) in Student_list'>
      	
   	   <div id="xiang">
  	   <div  class="toubiao">{{h.initials}}</div>
  	   
  	   <div v-for='(j,a) in h.StudentList'>
  	   	
  	   <!--<van-swipe-cell :right-width="150" >-->
      <!--<van-cell-group>-->
  	     <div @click="tiao(j)" class="boxs">
  	  	  <div class="img_box"><img src="../img/lixiaomeng@2x.png"/></div>
  	  	  <p class="name">{{j.surname}}</p>
<!--班级学生状态---------------------------------------------------------------------------------------------------->  	  	  
  	  	    <div style="background:rgba(250,183,90,1);" v-show='j.Quality1==1' class="type_tie">午托</div>
  	  	    <div style="background:rgba(253,127,71,1);padding:0 0.2rem;" v-show="j.cate==1" class="type_tie">营养餐</div>
  	  	    <div style="background:rgba(255,110,166,1);" v-show="j.Quality2==1" class="type_tie">晚托</div>
  	  	    <div style="background:rgba(86,140,244,1);" v-show="j.course==1" class="type_tie">课程</div>
<!-------------------------------------------------------------------------------------------------------------->  	  	  
  	     </div>	 
  	   </div>
  	  </div> 	
     </div>   
   	 </div>
<!--修改名字组件-------------------------------------------------------------------------------------------------->   	 
   	 <mu-fade-transition>
       <div @touchmove.prevent @click='show_aws=false' class="meng" v-show="show_aws">
       	  <mu-scale-transition>
              <div @click.stop class="meng_box" v-show="show_aws">
              	 <div class="meng_box_c">
              	   <p>修改名字</p> 
              	   <!--昵称输入框-->
              	   <input  @input ="inputFunc"  v-model="username" class="inps_ss" type="text" placeholder="输入的内容不能超过4个字"/>
              	   <button @click="beforeClose" v-if="btn_show" style="background:rgb(190, 27, 27);color:white;" class="btn_sj">保存</button>
              	   <button v-else class="btn_sj">保存</button>
                </div>
              </div> 
          </mu-scale-transition>
       </div>
    </mu-fade-transition>  
<!---------------------------------------------------------------------------------------------------->   	 
   	 <van-popup v-model="showx" position="bottom" :overlay="false">
         <div  v-show="showx" @click="showx=false" style="width: 100%;background:white;" >
         </div>
     </van-popup>  
   		 <van-popup v-model="show2" position="bottom" :overlay="true">
             <van-picker
              show-toolbar
              title=""
              :columns="columns_s"
              @cancel="onCancel"
              @confirm='onConfirm'
              />
       </van-popup>
   </div>
  <!--
  	作者：2443611475@qq.com
  	时间：2018-10-10
  	描述：底部标签
  -->  
    <div class="btn_box">
    	<div style="height:100%;width:7.173333rem;position:absolute;left: 0;right: 0;top: 0;bottom: 0;margin:auto;">
    		<div style=""><img src="../img/ketang_hong@2x.png" alt="" /><p>课堂</p></div>
    	  <div @click="banwu" style="margin-left: 2.733333rem;"><img style="width: 0.413333rem;height: 0.453333rem;" src="../img/banwu_hui@2x.png" alt="" /><p style="color: #999999;">班务</p></div>	
    	  <div @click="xiao" style="float: right;"><img style="width: 0.52rem;height: 0.493333rem;" src="../img/xiaoxi_hui@2x.png" alt="" /><p style="color: #999999;">消息</p></div>	
    	 </div>
    </div>
	
	<!-- <div class="dal_a" v-show="ke_showa" @click="go_classomm">课堂</div> -->
	
  </div>
</body>
 
  <!--<script src="http://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>-->
  <script type="text/javascript" src="../js/jq.js"></script>
  <script src="../js/axios.js"></script>
  <script src="../js/vuex.js"></script>
  <!--手机端打印错误--> 
  
   <!-- <script src="//cdn.bootcss.com/eruda/1.4.2/eruda.min.js"></script>
   <script>eruda.init();</script>
  -->
  <script>
    
    //控制微信浏览器回退按钮，跳转至指定页面
  	pushHistory();
        window.addEventListener("popstate",function(e){
			if(localStorage.type_con==1){
							 location.href = './Classroomss.html'
			}else if(localStorage.type_con==2){
							 location.href = './classroom.html'  
			}
        });
        function pushHistory(){
        var state = { 
            title:"title", 
            url:"#"
        }; 
        window.history.pushState(state,"title","#"); 
      } 
    
    new Vue({
      el: '#app',
      data: function(){
        return {
        	username:'',//修改学生名字
        	btn_show:false,
        	show_aws:false,
        	
        	show_xxs:false,
        	show_date:false,
        	datess:undefined,	
        	
        	ader_title:'全部',
        	ader_index:0,
        	ader_show:false,
        	ader_act:['全部','午托','营养餐','晚托','课程'],
        	
        	kong_act_x:false,
        	
        	yer:'',//年
        	maths:'',//月
        	dates:'',//日
        	
        	date_s:'',//展示的时间
        	date_sa:'',//传递时间
        	
        	currentDate:new Date(),
        	date_p_show:false,
        	
        	showx:false,
        	show_xa:false,
        	
//      	showbox:true,
        	cwa_date_x:false,
        	cwa_date1:'',
        	cwa_date2:'',
        	cwa_date_data:'',
        	cwa_ke_show:true,
        
        	styleobj :{//蒙版出现后的样式
            width:'100%',
  		      background:'rgba(0,0,0,0.7)',
  		      position:'fixed',
  		      top:'0',
  		      left:'0',
  		      zIndex:'2',
          },
          styleobjs :{//蒙版出现后的样式
            width:'100%',
  		      background:'rgba(0,0,0,0.7)',
  		      position:'fixed',
  		      top:'0',
  		      left:'0',
  		      zIndex:'2',
          },
        	top_show:true,
        	show:false,
        	show1:false,
        	show2:false,
        	show3:false,
        	ding_vuale:'',
        	columns:[],
        	columns_s:[],
        	
        	Student_list:[],
        	inps:true,
        	inp_show:true,
        	inpv:'',
        	
        	li_ac:0,   
        	dian_xiao:false,
        	
        	bj_act:'',//修改学生姓名的当前学生存储
			
			ke_showa:true,
        }
      },
      methods:{
		
		  
      	inputFunc(){
      		  this.btn_show = (this.username!=''&&this.username.length<=4)?true:false
      	},
      	bj_click(j){//用户侧滑出编辑按钮，并且点击
      		  this.show_aws=true;
      		  this.btn_show = true;
      		  this.bj_act = j;
      		  this.username = j.surname
      		  console.log(this.bj_act)
      	},
      	muse_ok(){//用户点击确认按钮
      	},
      	add_aws(){
      		 location.href = './C_Add student.html'  
      	},
      	ader_c_click(i,index){//分类筛选
      		  this.ader_title = i;
      		  this.ader_index = index
      		  this.ader_show = false
      		  this.show_xxs = true
      		  this.get_claact(localStorage.Classroom_id);
      		  console.log(i);
      		  window.setTimeout(()=>{
      		  var ac = [];
      		  if(index==0){//查询全部
      		  	 this.Student_list = Student_list_s;
      		  	 console.log(Student_list_s,'全部')
      		  	 this.kong_act_x = false;
      		  }else if(index==1){//午托
      		    var acr = Student_list_s;
      		  	for(var l=0;l<5;l++){
      		  		for(var i=0;i<acr.length;i++){
      		  	 	    for(var j=0;j<acr[i].StudentList.length;j++){
      		  	 	    	  if(acr[i].StudentList[j].Quality1!=1){
      		  	 	    	  	    acr[i].StudentList.splice(j,1);
      		  	 	    	  }
      		  	 	    }
      		  	 	    if(acr[i].StudentList.length==0){
      		  	 	    	   acr.splice(i,1);
      		  	 	    }
      		  	 	   this.kong_act_x = acr.length==0?true:false;
      		  	 	   this.Student_list = acr;
      		  	  }
      		  	}
      		  }else if(index==2){
      		  	var acr = Student_list_s;
      		  	for(var l=0;l<5;l++){
      		  		for(var i=0;i<acr.length;i++){
      		  	 	    for(var j=0;j<acr[i].StudentList.length;j++){
      		  	 	    	  if(acr[i].StudentList[j].cate!=1){
      		  	 	    	  	    acr[i].StudentList.splice(j,1);
      		  	 	    	  }
      		  	 	    }
      		  	 	    if(acr[i].StudentList.length==0){
      		  	 	    	   acr.splice(i,1);
      		  	 	    }
      		  	 	   this.kong_act_x = acr.length==0?true:false;
      		  	 	   this.Student_list = acr;
      		  	   }
      		  	 }  
      		  }else if(index==3){
      		  	var acr = Student_list_s;
      		  	for(var l=0;l<5;l++){
      		  		for(var i=0;i<acr.length;i++){
      		  	 	    for(var j=0;j<acr[i].StudentList.length;j++){
      		  	 	    	  if(acr[i].StudentList[j].Quality2!=1){
      		  	 	    	  	    acr[i].StudentList.splice(j,1);
      		  	 	    	  }
      		  	 	    }
      		  	 	    if(acr[i].StudentList.length==0){
      		  	 	    	   acr.splice(i,1);
      		  	 	    }
      		  	 	   this.kong_act_x = acr.length==0?true:false;
      		  	 	   this.Student_list = acr;
      		  	   }
      		  	 }  
      		  }else if(index==4){
      		  	var acr = Student_list_s;
      		  	for(var l=0;l<5;l++){
      		  		for(var i=0;i<acr.length;i++){
      		  	 	    for(var j=0;j<acr[i].StudentList.length;j++){
      		  	 	    	  if(acr[i].StudentList[j].course!=1){
      		  	 	    	  	    acr[i].StudentList.splice(j,1);
      		  	 	    	  }
      		  	 	    }
      		  	 	    if(acr[i].StudentList.length==0){
      		  	 	    	   acr.splice(i,1);
      		  	 	    }
      		  	 	   this.kong_act_x = acr.length==0?true:false;
      		  	 	   this.Student_list = acr;
      		  	   }
      		  	 }  
      		  }
      		 },500)  
      	},
      	all_act(){
      		this.inpv = '';
      		this.inp_show = true;
      		this.show_xxs = true
      		this.get_claact(localStorage.Classroom_id);
      	},
      	handleScroll(){//监测滑动，使右侧li同步到指定字母位置
            var a = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
            let len = $('.toubiao').length-1
            for (; len > -1; len--){
            	   if(a>=$('.toubiao').eq(len).offset().top-($('#tt').height()+$('.ader_top').height()+$('.toubiao').height())){
            	   	   this.li_ac = len
            	   	   $('.p_bs').css('top',$('#uls li').height()*(len)); 
            	   	   break
            	   }
             }
         },
         destroyed (){//移除页面监听--跳转其他页面务必调用该事件
           window.removeEventListener('scroll', this.handleScroll)
         },
      	cehua(index,i){//控制页面滑动到指定位置
      		  
      		  this.destroyed()
      		  
      		  this.li_ac = index;
      		  
      		  vant.Toast({ 
      		  	    message:i,
      		  	    duration:500
      		  });
      		  var a = this.Student_list.slice(0,index)
      		  var c = 0;
      		  for(var i=0;i<a.length;i++){
      		  	  c+=a[i].StudentList.length;
      		  };
      		  var height_s = (a.length*$('.toubiao').height())+(c*$('.boxs').height());
      		  
      		  $('.p_bs').css('top',((a.length)*$('#uls li').height()));
      		  
      		  $("html, body").animate({scrollTop:(height_s)});
      		  
      		  window.setTimeout(()=>{
      		  	  
      		  	  window.addEventListener('scroll', this.handleScroll);
      		  	  
      		  },500)
      	},
      	
      	alertA(ev){
      		if(ev.keyCode==13){
      			   console.log(this.inpv);
      			   
      		  }
      		},
      	
      	changeCount_s(){//输入框失去焦点事件==》执行搜索功能
      		   this.inpv==''?this.inps=true:this.inps=false;
      		   this.show_xxs = true
      		   this.get_claact(localStorage.Classroom_id);
      	},
      	changeCount(){//输入框输入内容事件
      	 	   this.inpv==''?this.inps=true:this.inps=false;
      	 	   console.log(1111)
      	 },
      	jiaos(){//输入框获得焦点事件
      	 	   this.inps = false;
      	 	   document.getElementById('inp').focus();
      	 	   console.log(222)
      	 },
      	
      	get_claact(id){//请求班级学生列表数据函数
      		var that = this
      		
      		that.Student_list = []
      		
      		var ader_id = 0
      		if(this.ader_title=='午托'){
      			   ader_id =1
      		}else if(this.ader_title=='营养餐'){
      			   ader_id =2
      		}else if(this.ader_title=='晚托'){
      			   ader_id =3
      		}else if(this.ader_title=='课程'){
      			   ader_id =4
      		}
      		
      	 	axios.get(Main_domain_name+'/api/class/teacher/getClassinfo?api_token='+localStorage.api_token+'&gc='+id+'&student='+this.inpv+'&student_type='+ader_id
        	     ).then(res=>{
        	      	if(res.data.code==200){
        	      		  console.log(res.data.data,'学生列表数据')
        	      		if(res.data.data.length!=0){
        	      			  that.Student_list = res.data.data;
        	      			  Student_list_s = res.data.data;
                        localStorage.trust_classes_id = id;//班级id
                        this.kong_act_x = false;
        	      		}else{
        	      			  this.kong_act_x = true 
        	      		}
//                   this.showbox = false;
                     $('#mengs').fadeOut(300);
                     this.show_xxs = false
        	      	}else if(res.data.code==404){
        	      		 console.log(res);
        	      		this.kong_act_x = true 
        	      	}
                }).catch(err=>{
                       console.log(err);
              });
      	 },
      	Get_classroom(){
      		var that = this;
      		if(localStorage.api_token){
      			axios.get(Main_domain_name+'/api/class/teacher/getclasslist?api_token='+localStorage.api_token
        	      ).then(res=>{
        	      		if(res.data.code==200){
        	      			 
        	      			if(res.data.data.length>0){
        	      				
        	      			 that.top_show = false;
        	      			 
        	      			 that.columns =  res.data.data;
        	      			 
        	      			 console.log(that.columns,'班级数据')
        	      			 
                      for(i in that.columns){
                   	    that.columns_s.push(that.columns[i].classes);	
                      }
                     
                     var cla_id = 0;
					 
//                      if(localStorage.Classroom_id){
//                      	   for(var i=0;i<that.columns.length;i++){
//                      	   	     if(that.columns[i].id==localStorage.Classroom_id){
//                      	   	     	    cla_id=2;
//                      	   	     }
//                      	   }
//                      }

                     localStorage.Classroom_ding_vuale = localStorage.Classroom_ding_vuale?localStorage.Classroom_ding_vuale:that.columns_s[0];//存储用户选择的班级
                     
                     localStorage.Classroom_id = localStorage.Classroom_id?localStorage.Classroom_id:that.columns[0].id ;//存储用户选择的班级的id
                     
                     console.log(cla_id,'--缓的id是否有效(0无效 2有效)--',localStorage.Classroom_id,'-- 缓存的班级 id');
                     
                     that.ding_vuale =localStorage.Classroom_ding_vuale
                     
                     let ass =  localStorage.Classroom_id;
                     
                     that.get_claact(localStorage.Classroom_id);//默认一打开页面获取第一个班的学生列表
                     
//                   console.log(that.columns)
                     
                     $('#mengs').fadeOut(300);
                     
                     if(localStorage.add_show ==2){
                        	    vant.Toast.success('添加成功');
                        	    localStorage.add_show = 1
                       }
        	      		}else{
        	      			  that.top_show = true;
        	      			  $('#mengs').fadeOut(300);
        	      		}
        	      	}else if(res.data.code==404){
        	      		  vant.Toast('身份过期，需要重新验证！');
						  localStorage.api_token1 = '';
        	      		  localStorage.teacher_id = '';
        	      		  console.log(localStorage.api_token);
                       	  location.href = './001.html'
        	      	  }
        	      	
                }).catch(err=>{
                       console.log(err);
                        this.$toast({
        	      	 	    	    message:'发生错误，请检查网络连接',
        	      	 	    	    duration:5000
        	      	 	    	});
//      	      	 	  localStorage.teacher_id = '';
//      	      		  window.setTimeout(()=>{
//                     	    		  location.href = './001.html'
//                     },300)	
                });
      		}else{
   			  localStorage.api_token1='';
   			  localStorage.teacher_id = '';
   			   window.setTimeout(()=>{
                  location.href = './001.html'
               },300)
      		  }
      	  },
      	xiao(){
      		location.href ='./003xiaoxi.html'
      	},
      	 tiao(i){
      	 	 localStorage.Student_id = i.class_name;
      	 	 localStorage.student_ids = i.student_id;
      	 	 console.log(i)
      	 	 location.href ='./xue_sheng_zi_liao.html';//跳转学生资料
      	 },
      	 shangke(){
      	 	 
      	 },
      	 xiake(){
      	 	
      	 },
      	 banwu(){
      	 	 location.href ='./002banwu_kaoqin.html'
      	 },
         onConfirm(value,index){
             this.ding_vuale = value;
             localStorage.Classroom_ding_vuale = value;//存储用户选择的班级
             localStorage.Classroom_id = this.columns[index].id;//存储用户选择的班级的id
             this.show_xxs = true;
             this.get_claact(localStorage.Classroom_id);
             this.show2 = false
         },
         onCancel(){
            this.show2=false;
         },
         
		 git_shenfen(){//获取身份
		  	  axios.get(Main_domain_name+'/api/class/user/teacher_role?api_token='+localStorage.api_token
		  	    ).then(res=>{
		  	    	if(res.status==200){
		                        if(res.data.code=='200'){
		                        	  console.log(res.data.data,'获取身份');
		 							  localStorage.type_con = res.data.data;//储存身份
		                        }
		  	    	 }
		          }).catch(err=>{
		                 console.log(err)
		          })
		  },
      },
      
      mounted(){
      	// localStorage.type_con=1;
      	// localStorage.api_token = 'MMsQnNpQcEdDrYdtXS3XEF2SnpxzkRD2'  
      	
//    	localStorage.api_token = 'JXBWMQY7yHDz7RyTdwePFYhBFHHacax5'  
        
     // localStorage.api_token = 'AKdkwm7arwfPThPWQTShRadeYBkEk7fj'  
        
      	this.Get_classroom()//获取课堂数据
      	
      	console.log(localStorage.api_token)
      	
//    	document.getElementById('meng').style.height = document.documentElement.clientHeight+'px';
      	
//    	this.git_date()//获取当前时间
      	
      	window.addEventListener('scroll', this.handleScroll);
      	
      	
      }
        
    })
  </script>
</html>